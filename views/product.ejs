<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>offside ejs</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body>
  <nav class="navbar " style="background-color: grey;color: white;">
    <div class="container-fluid">
      <a class="navbar-brand" style="color: white;">Offside Shop</a>
      <div class="d-flex" role="search">
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" id="search">
        <button class="btn btn-outline-success" type="submit" onclick="search()" style="background-color: greenyellow;">Search</button>
      </div>
      <div class="d-flex">
        <%= user.username %>
        <img style="width: 30px;margin-left: 20px;cursor: pointer;" src="<%= user.avatar %>" alt="user" onclick="profil()">

        <a href="/api/cart/<%= product.id_user %>" style="margin-left:30px;">
          <img style="width: 20px; right: 20px;cursor: pointer;" src="http://localhost:300/image/shopping-basket.png" alt="">
        </a>
      </div>
    </div>
  </nav>
  <br>
  <div style="display: flex;flex-wrap: wrap;margin-bottom: 400px;">
    <% product.forEach(el=> { %>
    <a href="/api/product/<%= el.id %>" style="text-decoration: none;">
      <span name=<%= el.name %> class="card" style="width: 18rem; margin-left: 10px;margin-bottom: 10px;cursor: pointer;" id='gambar'>
        <img style="width:100%;height:200px;" src=<%= el.url %> alt=<% el.pictures %>>
        <div class="card-body">
          <h5 class="card-title"><%= el.name %></h5>
          <p class="card-text">Rp.<%= el.price %></p>
        </div>
      </span>
    </a>
    <% }) %>
  </div>
  <%- include('./layout/footer.ejs') %>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const productNameInput = document.getElementById('search');
    const cards = document.querySelectorAll('.card');

    productNameInput.addEventListener('input', function() {
      const inputValue = this.value.toLowerCase();

      cards.forEach(card => {
        const cardName = card.getAttribute('name').toLowerCase();
        if (cardName.includes(inputValue)) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    });

    function profil() {
      window.location = '/profil';
    }
  </script>
</body>

</html>